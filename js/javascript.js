let array_1 = [{
        question: "Phần của đường bộ được sử dụng cho các phương tiện giao thông qua lại là gì?",
        image: "",
        answers: [
                "Phần mặt đường và lề đường.",
                "Phần đường xe chạy.",
                "Phần đường xe cơ giới."

            ] //1
    }, {
        question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào ?",
        answers: [
                "Phương tiện giao thông cơ giới đường bộ.",
                "Phương tiện giao thông thô sơ đường bộ và xe máy chuyên dùng.",
                "Cả ý 1 và ý 2."
            ] //2
    },
    {
        question: "* Sử dụng rượu bia khi lái xe, nếu bị phát hiện thì bị xử lý như thế nào?",
        image: " ",
        answers: [
                "Chỉ bị nhắc nhở.",
                "Bị xử phạt hành chính hoặc có thể bị xử lý hình sự tùy theo mức độ vi phạm.",
                " Không bị xử lý hình sự."

            ] //3

    },
    {
        question: "Bạn đang lái xe phía trước có một xe cứu thương đang phát tín hiệu ưu tiên bạn có được phép vượt hay không?",
        image: " ",
        answers: [
            "Không được vượt.",
            "Được vượt khi đang đi trên cầu.",
            " Được phép vượt khi đi qua nơi giao nhau có ít phương tiện cùng tham gia giao thông.",
            "Được vượt khi đảm bảo an toàn."
            //4

        ]
    },
    {
        question: "* * Hành vi sử dụng xe mô tô để kéo, đẩy xe mô tô khác bị hết xăng đến trạm mua xăng có được phép hay không?",
        image: " ",
        answers: [
            "Chỉ được kéo nếu đã nhìn thấy trạm xăng.",
            "Chỉ được thực hiện trên đường vắng phương tiện cùng tham gia giao thông.",
            " Không được phép."
            //5
        ]
    },
    {
        question: "Biển báo hiệu hình tròn có nền xanh lam có hình vẽ màu trắng là loại biển gì dưới đây?",
        image: " https://hoclaixemoto.com/image200/41.jpg",
        answers: [
            "Biển báo nguy hiểm.",
            "Biển báo cấm.",
            "Biển báo hiệu lệnh phải thi hành.",
            "Biển báo chỉ dẫn."
            //6
        ]
    },

    {
        question: "Bạn đang lái xe trong khu vực đô thị từ 22 giờ đến 5 giờ sáng hôm sau và cần vượt một xe khác, bạn cần báo hiệu như thế nào để đảm bảo an toàn giao thông?",
        image: " ",
        answers: [
            "Phải báo hiệu bằng đèn hoặc còi;",
            "Chỉ được báo hiệu bằng còi.",
            "Phải báo hiệu bằng cả còi và đèn.",
            "Chỉ được báo hiệu bằng đèn."
            //7
        ]
    },
    {
        question: "Người điều khiển phương tiện tham gia giao thông trong hầm đường bộ ngoài việc phải tuân thủ các quy tắc giao thông còn phải thực hiện những quy định nào dưới đây?",
        image: " ",
        answers: [
            "Xe cơ giới, xe máy chuyên dùng phải bật đèn; xe thô sơ phải bật đèn hoặc có vật phát sáng báo hiệu; chỉ được dừng xe, đỗ xe ở nơi quy định.",
            "Xe cơ giới phải bật đèn ngay cả khi đường hầm sáng; phải cho xe chạy trên một làn đường và chỉ chuyển làn ở nơi được phép; được quay đầu xe, lùi xe khi cần thiết.",
            "Xe máy chuyên dùng phải bật đèn ngay cả khi đường hầm sáng; phải cho xe chạy trên một làn đường và chỉ chuyển làn ở nơi được phép; được quay đầu xe, lùi xe khi cần thiết."

            //8
        ]
    },
    {
        question: "Trên đoạn đường hai chiều không có giải phân cách giữa, người lái xe không được vượt xe khác trong các trường hợp nào dưới đây?",
        image: " ",
        answers: [
                "Xe bị vượt bất ngờ tăng tốc độ và cố tình không nhường đường.",
                "Xe bị vượt giảm tốc độ và nhường đường.",
                "Phát hiện có xe đi ngược chiều.",
                "Cả ý 1 và ý 3."

            ] //9
    },
    {
        question: "Khi điều khiển xe chạy với tốc độ dưới 60 km/h, để đảm bảo khoảng cách an toàn giữa hai xe, người lái xe phải điều khiển xe như thế nào?",
        image: " ",
        answers: [
            "Chủ động giữ khoảng cách an toàn phù hợp với xe chạy liền trước xe của mình.",
            "Đảm bảo khoảng cách an toàn theo mật độ phương tiện, tình hình giao thông thực tế.",
            " Cả ý 1 và ý 2."

            //10
        ]
    },
    {
        question: "Để báo hiệu cho xe phía trước biết xe mô tô của bạn muốn vượt, bạn phải có tín hiệu như thế nào dưới đây?",
        image: " ",
        answers: [
            "Ra tín hiệu bằng tay rồi cho xe vượt qua.",
            "Tăng ga mạnh để gây sự chú ý rồi cho xe vượt qua.",
            "Bạn phải có tín hiệu bằng đèn hoặc còi."
            //11
        ]
    },
    {
        question: "* Khi điều khiển xe mô tô tay ga xuống đường dốc dài, độ dốc cao, người lái xe cần thực hiện các thao tác nào dưới đây để đảm bảo an toàn?",
        image: " ",
        answers: [
            "Giữ tay ga ở mức độ phù hợp, sử dụng phanh trước và phanh sau để giảm tốc độ.",
            "Nhả hết tay ga, tắt động cơ, sử dụng phanh trước và phanh sau để giảm tốc độ.",
            "Sử dụng phanh trước để giảm tốc độ kết hợp với tắt chìa khóa điện của xe."
            //12
        ]
    },
    {
        question: "Tay ga trên xe mô tô hai bánh có tác dụng gì trong các trường hợp dưới đây?",
        image: " ",
        answers: [
            "Để điều khiển xe chạy về phía trước.",
            "Để điều tiết công suất động cơ qua đó điều khiển tốc độ của xe.",
            "Để điều khiển xe chạy lùi.",
            "Cả ý 1 và ý 2."
            //13
        ]
    },
    {
        question: "Biển nào cấm xe rẽ trái?",
        image: "https://hoclaixemoto.com/image200/105.jpg ",
        answers: [
            "Biển 1.",
            "Biển 2.",
            "Cả hai biển."
            //14
        ]
    },
    {
        question: "Biển nào dưới đây các phương tiện không được phép đi vào?",
        image: "https://hoclaixemoto.com/image200/113.jpg ",
        answers: [
            "Biển 1.",
            "Biển 2.",
            "Biển 1 và 2."

            //15
        ]
    },
    {
        question: "Biển nào xe mô tô hai bánh không được đi vào?",
        image: " https://hoclaixemoto.com/image200/121.jpg",
        answers: [
            "Biển 1.",
            "Biển 2.",
            "Biển 3."
            //16
        ]
    },
    {
        question: "Biển nào báo hiệu nguy hiểm giao nhau với đường sắt?",
        image: "https://hoclaixemoto.com/image200/129.jpg",
        answers: [
            "Biển 1 và 2.",
            "Biển 1 và 3.",
            "Biển 2 và 3.",
            "Cả ba biển."
            //17
        ]
    },
    {
        question: "Biển nào báo hiệu “Đường giao nhau” của các tuyến đường cùng cấp?",
        image: " https://hoclaixemoto.com/image200/137.jpg",
        answers: [
            "Biển 1.",
            "Biển 2.",
            "Biển 3."

            //18
        ]
    },
    {
        question: "Biển nào chỉ dẫn nơi bắt đầu đoạn đường dành cho người đi bộ?",
        image: " https://hoclaixemoto.com/image200/145.jpg",
        answers: [
            "Biển 1.",
            "Biển 2.",
            "Biển 3."
            //19
        ]
    },
    {
        question: "Biển nào dưới đây báo hiệu hết cấm vượt?",
        image: "https://hoclaixemoto.com/image200/153.jpghttps://hoclaixemoto.com/image200/153.jpg ",
        answers: [
                "Biển 1.",
                "Biển 2.",
                "Biển 3.",
                "Biển 2 và 3."

            ] //20
    },
    {
        question: "Vạch kẻ đường nào dưới đây là vạch phân chia hai chiều xe chạy (vạch tim đường), xe không được lấn làn, không được đè lên vạch?",
        image: "https://hoclaixemoto.com/image200/161.jpg ",
        answers: [
            "Vạch 1.",
            "Vạch 2.",
            "Vạch 3.",
            "Cả 3 Vạch."
            //21
        ]
    },
    {
        question: "Xe nào được quyền đi trước trong trường hợp này?",
        image: "https://hoclaixemoto.com/image200/169.jpg ",
        answers: [
            "Mô tô.",
            "Xe cứu thương.",
            "Tông Nhau"

            //22
        ]
    },
    {
        question: "Xe tải kéo mô tô ba bánh như hình này có đúng quy tắc giao thông không?",
        image: "https://hoclaixemoto.com/image200/177.jpg ",
        answers: [
            "Đúng.",
            " Không đúng.",
            " Sai"

            //23
        ]
    },
    {
        question: "Theo hướng mũi tên, những hướng nào xe mô tô được phép đi?",
        image: "https://hoclaixemoto.com/image200/185.jpg ",
        answers: [
            "Cả ba hướng.",
            "Hướng 1 và 2.",
            "Hướng 1 và 3.",
            "Hướng 2 và 3."
            //24
        ]
    },
    {
        question: "Các xe đi theo hướng mũi tên, xe nào vi phạm quy tắc giao thông?",
        image: "https://hoclaixemoto.com/image200/193.jpg ",
        answers: [
            "Xe con, xe tải, xe khách..",
            "Xe tải, xe khách, xe mô tô.",
            " Xe khách, xe mô tô, xe con.",
            "Xe khách, xe mô tô, xe con."
            //25
        ]
    },
];
let array_2 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_3 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_4 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_5 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_6 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_7 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
let array_8 = [{
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào123",

    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành",
        "Biển báo chỉ dẫn"
    ]
}, {
    question: "Phương tiện tham gia giao thông đường bộ” gồm những loại nào12345678",
    image: "https://hoclaixemoto.com/image200/145.jpg",
    answers: [
        "Biển báo nguy hiểm",
        "Biển báo cấm.",
        "Biển báo hiệu lệnh phải thi hành"
        // "Biển báo chỉ dẫn"
    ]
}];
const checkArray = [
    [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1]
];

const synthetic = [array_1, array_2, array_4, array_5, array_6, array_7, array_8];
let exam = [],
    score = 0,
    answerArray = [],
    current = 0,
    questionNodeList = [];

let html = '<div class="question-item d-none">' +
    '<div class="ordinal-question">' +
    'Câu ' +
    '</div>' +
    '<div id="value-question">' +
    '</div>' +
    '<div id="imgs"><image src=""></image></div>' +
    '<div class="answer">' +
    '<ul class="checkbox-list">' +
    '<li id="no_1">' +
    '<input type="radio" name="1" value="1"><span>1 - </span>' +
    '</li>' +
    '<li id="no_2">' +
    '<input type="radio" name="1" value="2"><span>2 - </span>' +
    '</li>' +
    '<li id="no_3">' +
    '<input type="radio" name="1" value="3"><span>3 - </span>' +
    '</li>' +
    '<li id="no_4">' +
    '<input type="radio" name="1" value="4"><span>4 - </span>' +
    '</li>' +
    '</ul>' +
    '</div>';



function nextOrPrev(isNext = true) {
    questionNodeList[current - 1].classList.toggle("d-none");
    if (!isNext) {
        if (current - 2 >= 0)
            current--;
    } else {
        if (current + 1 <= exam.length)
            current++;
    }
    questionNodeList[current - 1].classList.toggle("d-none");
}

function renderAllQuestion(de = synthetic[0]) {
    if (exam && exam.length > 0) {
        exam.forEach(function(value, index) {
            renderQuestion(index, de);
        })
    }
    questionNodeList = document.querySelectorAll(".question .question-item");
    current = 1;
    questionNodeList[current - 1].classList.toggle("d-none");
    let checkbox = document.querySelectorAll(".checkbox-list li input");
    checkbox.forEach(function(item, index) {
        item.addEventListener("click", function() {
            answerArray[current - 1] = item.value * 1;
        });
    });

}

function renderQuestion(id = 0, de = synthetic[0]) {
    if (id >= 0) {
        current = id + 1;
        let data = de[id];
        const container = document.getElementById("question");
        container.innerHTML += html;
        container.lastChild.querySelector("#value-question").textContent = data.question;
        container.lastChild.querySelector("#no_1 span").textContent = "1 - " + data.answers[0];
        container.lastChild.querySelector("#no_2 span").textContent = "2 - " + data.answers[1];
        container.lastChild.querySelector("#no_3 span").textContent = "3 - " + data.answers[2];
        container.lastChild.querySelector(".ordinal-question").textContent = "Câu " + current;
        if (data.answers.length > 3) {
            container.lastChild.querySelector("#no_4").style.display = "flex";
            container.lastChild.querySelector("#no_4 span").textContent = "4 - " + data.answers[3];
        }
        if (data.image) {
            const imgs = container.lastChild.querySelector("#imgs");
            imgs.style.display = "flex";
            imgs.firstChild.src = data.image;
        }

    }
}

function renderQuestionPage(exam_number = 0) {
    let target = document.getElementById("container");
    document.getElementById("css").href = "/css/dethi.css";

    let html = '<div class="left-container">' +
        '<div>' +
        '<strong style="color: blue;">Câu Hỏi | Đề Số 1</strong>' +
        '</div>' +
        '<ul id = "btn-list"class="btn-list">' +
        ' </ul>' +
        '</div>' +
        '<div class="right-container ">' +
        '<div class="question" id="question" >' +
        '</div>' +
        ' <ul class="paper">' +
        '  <li id="previous">' +
        '<button>Câu Trước</button>' +
        ' </li>' +
        '<li id="next">' +
        ' <button>Câu Sau</button>' +
        '</li>' +
        '<li><button id="get-score-btn">Nộp bài</button></li>' +
        ' </ul>' +
        '</div>';

    target.innerHTML = html;
    if (exam_number >= 0 && exam_number < synthetic.length) {
        exam = synthetic[exam_number];
        let sidebar = document.getElementById('btn-list');
        sidebar.innerHTML = "";
        exam.forEach(function(item, index) {
            sidebar.innerHTML += '<li class="btn-item">' +
                '<button id="1">' + (index + 1) + '</button>' +
                '</li> ';
        })
        renderAllQuestion();
        document.getElementById("next").addEventListener("click", nextOrPrev);
        document.getElementById("previous").addEventListener("click", function() { nextOrPrev(false) }, false);
    }
    document.getElementById("get-score-btn").addEventListener("click", () => {
        getScore();
        alert("Điểm của bạn là : " + score);

    });
}

function setEventForExampBtn() {
    let examBtn = document.querySelectorAll(".exam button");

    if (examBtn.length > 0) {
        examBtn.forEach(function(item, index) {
            item.addEventListener("click", function() {
                renderQuestionPage(index);
            });
        });
    }

}

function getScore() {
    score = 0;
    checkArray[synthetic.indexOf(exam)].forEach(function(item, index) {

        if (item === answerArray[index])
            score++;
    });
}

setEventForExampBtn();